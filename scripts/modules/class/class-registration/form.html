<tangy-form has-summary linear-mode hide-closed-items id="class-registration" on-change="" >
  <tangy-form-item id="class-registration" title="صف دراسي" hide-back-button hide-next-button on-open="
    async function loadCurricula(that) {
       let url = './assets/forms.json'
       let response = await fetch(url);
       let data = await response.json();
       let tcsEl = that.$.content.querySelector('tangy-checkboxes[name=\'curriculum\']')
       let cbDiv = tcsEl.$.checkboxes;
       cbDiv.innerHTML = ''
       data.forEach(function(el) {
          if (el.id !=='class-registration' && el.id !=='student-registration' && el.id !=='example') {
              let checkbox = document.createElement('tangy-checkbox')
              checkbox.name = el.id
              checkbox.innerHTML = el.title
              cbDiv.appendChild(checkbox)
          }
       })
      let newValue = []
      cbDiv.querySelectorAll('tangy-checkbox')
        .forEach((el) => {
          el.addEventListener('change', tcsEl.onCheckboxClick.bind(tcsEl))
          newValue.push(el.getProps())
        })
      if (!that.value || (typeof that.value === 'object' && that.value.length < newValue.length)) {
        that.value = newValue
      }
    }
     let that = this;
     loadCurricula(that);
    ">
    <template>
      <tangy-input
        name="school_name"
        label="School name"
        type="text"
        error-message="This is required."
        required>
      </tangy-input>

      <tangy-input
        name="school_year"
        label="School year"
        type="text"
        error-message="This is required."
        required>
      </tangy-input>

      <tangy-input
        name="grade"
        label="Grade"
        type="text"
        error-message="This is required."
        required>
      </tangy-input>

      <tangy-checkboxes name="curriculum" label="Curriculum">
      </tangy-checkboxes>
    </template>
  </tangy-form-item>
</tangy-form>
