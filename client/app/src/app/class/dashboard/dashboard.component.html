<mat-toolbar *ngIf="selectedClass" class="classDashboard">
  <span dir="rtl" class="class-dashboard-button-spacer-left">
    <button mat-stroked-button color="primary"
            [routerLink]="['/class-forms-player/']" [queryParams]={curriculum:studentRegistrationCurriculum,classId:selectedClass.doc._id}>
      {{'Add Student'|translate}}
    </button>
  </span>
  <span dir="rtl" *ngFor="let class of classes; let classIndex=index" class="class-dashboard-curr-button-spacer">
      <button mat-stroked-button color="primary" [matMenuTriggerFor]="catMenu" class="mat-button"
              attr.data-classId = "{{class.id}}">
        {{class.doc.items[0].inputs[2].value}}
      </button>
      <mat-menu #catMenu="matMenu">
        <ng-template matMenuContent>
          <span *ngFor="let curriculum of class.doc.items[0].inputs[3].value; let curriculumIndex=index;">
            <button mat-menu-item *ngIf="curriculum.value ==='on'" (click)="selectCurriculum(classIndex, curriculumIndex)">{{curriculum.label}}</button>
          </span>
        </ng-template>
      </mat-menu>
    </span>
  <span dir="rtl" class="class-dashboard-button-spacer-right">
      <button mat-stroked-button color="primary" [matMenuTriggerFor]="reportsMenu" class="mat-button">{{'Select Report'|translate}}</button>
      <mat-menu #groupingMenu="matMenu">
        <ng-template matMenuContent>
        <button mat-menu-item *ngFor="let item of formList" routerLink="/reports/grouping/{{item.id}}/{{item.classId}}/{{item.curriculumId}}">{{item.title}}</button>
        </ng-template>
      </mat-menu>
      <mat-menu #reportsMenu="matMenu">
        <button mat-menu-item [matMenuTriggerFor]="groupingMenu">{{'Class grouping'|translate}}</button>
        <button mat-menu-item routerLink="/reports/studentSubtestReport/{{selectedClass.id}}">{{'Student Subtest Report'|translate}}</button>
      </mat-menu>
    </span>
  <span dir="rtl"><p class="mat-h3" *ngIf="!students">{{'No Students currently registered.'|translate}}</p></span>
</mat-toolbar>

<mat-card class="tangy-class-card-content-container" *ngIf="selectedClass">
  <div [hidden]="isLoading">
    <div class="selectedClassLabel"><p>{{'Student Dashboard'|translate}}: {{selectedClass.doc.items[0].inputs[2].value}} - {{selectedCurriculum.label}}</p></div>
    <table class="dashboard-table">
      <tr>
        <th>&nbsp;</th>
        <th>Student</th>
        <th *ngFor="let column of formColumns;let i=index"> {{column}} </th>
      </tr>
      <tr *ngFor="let element of allStudentResults">
        <td (click)="$event ? archiveStudent(element) : null" >
          <button routerLink="manage-user-profile" mat-menu-item>
            <mat-icon class="material-icons menu-tangy-location-list-icon">delete</mat-icon>
          </button>
        </td>
        <td (click)="$event ? selectStudentName(element) : null" class="student-name"> {{element["name"]}} </td>
        <td *ngFor="let form of curriculumForms;let i=index">
                <span *ngIf="element.forms[form.id]?.response ; else elseBlock ">
                  <input type="checkbox"
                         (change)="$event ? selectCheckboxResult(element,i,$event) : null"
                         [checked]="true"/>
                </span>
          <ng-template #elseBlock>
                  <span>
                <input type="checkbox" (click)="$event.stopPropagation()"
                       (change)="$event ? selectCheckbox(element,i) : null"
                />
                </span>
          </ng-template>

        </td>
      </tr>
    </table>
    <div class="button-row">
      <button mat-raised-button (click)="paginate(0)">{{'Prev'|translate}}</button>
      <button mat-raised-button (click)="paginate(1)">{{'Next'|translate}}</button>
    </div>
  </div>
</mat-card>

<div #container class = "hideme"> </div>
