<mat-tab-group #ClassesTabGroup (selectedTabChange)="tabChanged($event)" [selectedIndex]="selectedIndex">
  <mat-tab
    *ngFor="let class of classes; let classIndex=index"
    label="{{class.doc.items[0].inputs[2].value}}"
    attr.data-classId = "{{class.id}}">
    <ng-template matTabContent>
      <mat-card class="tangy-card-content-container">
        <mat-list>
          <mat-list-item >
            <span class="tangy-foreground-primary" *ngIf="curriculum">Curriculum: {{curriculum}}</span>
          </mat-list-item>
          <mat-list-item >
            <span class="tangy-foreground-primary">{{'Student Dashboard'|translate}} (<a class="tangy-foreground-primary undecorate-link test-size-reset" [routerLink]="['/tangy-forms-player/']" [queryParams]={formIndex:1,classId:class.doc._id}>Add Student</a>)</span>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <mat-form-field>
              Report: <mat-select [(value)]="selectedReport">
                <mat-option>None</mat-option>
                <mat-option value="progress">Progress Graph</mat-option>
                <mat-option value="mastery">Mastery Check Table</mat-option>
                <mat-option value="grouping">Class Grouping Table</mat-option>
              </mat-select>
            </mat-form-field>
          </mat-list-item>
            <mat-list-item *ngIf="!students">
              <p class="mat-h3">{{'No Students currently registered.'|translate}}</p>
            </mat-list-item>
            <!--<mat-list-item class="tangy-location-list" *ngFor="let student of students; let studentIndex=index">-->
              <!--<a class="tangy-foreground-primary undecorate-link test-size-reset" [routerLink]="['/tangy-forms-player/']" [queryParams]={formIndex:studentIndex}>-->
                <!--<span>{{student.doc.items[0].inputs[0].value}}</span>-->
              <!--</a>-->
            <!--</mat-list-item>-->
        </mat-list>
        <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">

          <ng-container matColumnDef="Name">
            <th mat-header-cell *matHeaderCellDef> Student </th>
            <td mat-cell *matCellDef="let element"> {{element["name"]}} </td>
          </ng-container>

          <ng-container [matColumnDef]="column" *ngFor="let column of formColumns;let i=index" >
            <th mat-header-cell *matHeaderCellDef> {{column}} </th>
            <!--<td mat-cell *matCellDef="let element">{{element["id"]}} <br/>{{element["name"]}}</td>-->
            <!--(change)="$event ? selection.toggle(column) : null"-->

            <td mat-cell *matCellDef="let element,i">
              <span *ngIf="!element['forms'][i]['response']">
              <mat-checkbox (click)="$event.stopPropagation()"
                            (change)="$event ? selectCheckbox(element,i) : null"
                            [checked]="selection.isSelected(element)">
              </mat-checkbox>
              </span>
              <span *ngIf="element['forms'][i]['response']">
                <mat-checkbox (click)="$event.stopPropagation()"
                (change)="$event ? selectCheckboxResult(element,i) : null"
                [checked]="true"
                [disabled]="true">
              </mat-checkbox><br/>Count: {{element["forms"][i]['response'].count}}</span>
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="columnsToDisplay"></tr>
          <tr mat-row *matRowDef="let row; columns: columnsToDisplay;"></tr>
        </table>
        <!--<span>curriculumFormsList: {{curriculumFormsList?.length}}</span>-->
        <mat-paginator [length]="pageLength"
                       [pageSize]="pageSize"
                       [pageSizeOptions]="pageSizeOptions">
        </mat-paginator>
      </mat-card>
    </ng-template>
  </mat-tab>

  <mat-tab>
    <ng-template mat-tab-label>
      <a class="mat-tab-label" [routerLink]="['/tangy-forms-player/']" [queryParams]={formIndex:0}>
        <span>Add Class</span>
    </a>
    </ng-template>
    <br>
    <mat-card class="tangy-card-content-container">
      <mat-list-item class="tangy-location-list">
        <a class="tangy-foreground-primary" [routerLink]="['/tangy-forms-player/']" [queryParams]={formIndex:0}>
          Add Class
        </a>
      </mat-list-item>
    </mat-card>
  </mat-tab>

</mat-tab-group>

<div #container class = "hideme"> </div>
