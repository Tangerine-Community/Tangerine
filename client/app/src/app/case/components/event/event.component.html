<app-case-breadcrumb *ngIf="caseService && caseService.case && caseService.case._id" [caseId]="caseService.case._id" [caseEventId]="caseEvent.id"></app-case-breadcrumb>
<div class="wrapper">
  <h1>
    <iron-icon icon="event"></iron-icon> 
    {{caseEvent ? caseEvent.name : ''}} ({{caseEvent ? caseEvent.id.substr(0,6) : ''}})
  </h1>
  <div class="form-cards" *ngIf="caseService">
    <paper-card 
      heading="{{eventFormInfo.name}}"
      class="form-card" 
      *ngFor="let eventFormInfo of eventFormsInfo"
    >
      <div class="card-content">
        <span *ngIf="eventFormInfo.required === true">*</span>
        <span *ngIf="eventFormInfo.eventForms.length === 0">
          You have not started this form.
        </span>
        <div *ngIf="eventFormInfo.eventForms.length > 0" role="listbox">
          <paper-icon-item 
            *ngFor="let eventForm of eventFormInfo.eventForms"
            routerLink="/case/event/form/{{eventForm.caseId}}/{{eventForm.caseEventId}}/{{eventForm.id}}"
          >
            <iron-icon icon="assignment" slot="item-icon"></iron-icon> 
            <paper-item-body two-line>
              <div>
                {{eventFormInfo.name}} {{eventForm.id.substr(0,6)}}
              </div>
              <div secondary>{{eventFormInfo.startDate | date:'medium'}}</div>
            </paper-item-body>
          </paper-icon-item>
        </div>
      </div>
      <div class="card-actions" *ngIf="eventFormInfo.canStart">
        <paper-button (click)="startEventForm(eventFormInfo.eventFormDefinitionId)">
          start form
        </paper-button>
      </div>

    </paper-card>
  </div>
</div>