<div *ngIf="syncProtocol === 'two-way'">
  <app-two-way-sync></app-two-way-sync>
</div>
<div *ngIf="!syncProtocol">
  <mat-card>
      <mat-card-content>
          <p class="mat-headline">{{'Syncing Status Summary'|translate}}</p>
          <span *ngIf="isSyncSuccesful">{{'Sync Successful'|translate}}</span>
          <span *ngIf="!isSyncSuccesful&&isSyncSuccesful!==undefined">{{'Sync Unsuccessful. Please Retry'|translate}}</span>
          <br/>
          <br>
        <div *ngIf="syncProtocol != 'replication'">
          <p>{{'Number of responses uploaded'|translate}}: {{docsUploaded}}</p>
          <p>{{'Number of responses not uploaded'|translate}}: {{docsNotUploaded}}</p>
          <p>{{'Percentage uploaded'|translate}}: {{syncPercentageComplete|number:'1.2-2'}}%</p>
        </div>
        <div>
          <h2>P2P Sync</h2>
          <button color="primary" mat-raised-button (click)="init()">{{'Init'|translate}}</button>
          <button color="primary" mat-raised-button (click)="startRegistration()">{{'Broadcast'|translate}}</button>
          <button color="primary" mat-raised-button (click)="discoverPeers()">{{'Discover'|translate}}</button>
        </div>
        <div id="p2p-results" style="overflow:auto;height:200px;"></div>

      </mat-card-content>
      <mat-card-actions>
          <button color="primary" mat-raised-button (click)="sync()">{{'SYNC DATA FOR ALL USERS'|translate}}</button>
      </mat-card-actions>
  </mat-card>
  <br>
  <br>
  <p class="mat-headline">{{'Syncing Status By User'|translate}}</p>
  <mat-accordion>
      <mat-expansion-panel *ngFor="let syncData of allUsersSyncData">
          <mat-expansion-panel-header>
              {{'Username'|translate}}: {{syncData.username}}
          </mat-expansion-panel-header>

          <p>{{'Docs Uploaded'|translate}}: {{syncData.docsUploaded}}</p>
          <p>{{'Docs Not Uploaded'|translate}}: {{syncData.docsNotUploaded}}</p>
            <ul *ngIf="syncData.uploadQueueResults.length > 0">
              <li *ngFor="let formResponseId of syncData.uploadQueueResults">{{formResponseId}}</li>
            </ul>
          <p>{{'Percentage Complete'|translate}}: {{syncData.syncPercentageComplete|number:'1.2-2'}}%</p>

      </mat-expansion-panel>

  </mat-accordion>
</div>
<br><br>
<div *ngIf="contentVersion">Content version: {{contentVersion}}</div>
