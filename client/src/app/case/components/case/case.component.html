<app-case-breadcrumb *ngIf="ready" [caseId]="caseService.case._id"></app-case-breadcrumb>

<div *ngIf="ready" class="subject-header">
  <h1>
    <span [innerHTML]="templateTitle|unsanitizeHtml"></span> 
  </h1>
  <div secondary>
    <span [innerHTML]="templateDescription|unsanitizeHtml"></span> 
  </div>
</div>

<div *ngIf="ready" class="wrapper">
  <div *ngFor="let eventInfo of caseEventsInfo">
    <app-case-event-list-item
      *ngFor="let caseEvent of eventInfo.caseEvents"
      [caseEvent]="caseEvent"
      [caseDefinition]="caseService.caseDefinition" 
      [caseEventDefinition]="eventInfo.caseEventDefinition" 
      [case]="caseService.case"
      routerLink="/case/event/{{caseService.case._id}}/{{caseEvent.id}}">
    </app-case-event-list-item>
  </div>
  <paper-icon-item 
    class="event new-event" 
  >
    <iron-icon icon="event" slot="item-icon"></iron-icon> 
    <paper-item-body two-line>
      <div>
        {{'New Event'|translate}}
      </div>
      <div secondary>
        <form (ngSubmit)="onSubmit()" #form="ngForm">
          <div class="dropdown-container">
            <select name="selected-event-type" [(ngModel)]="selectedNewEventType">
              <option value="" disabled selected>Choose type...</option>
              <option *ngFor="let eventInfo of creatableCaseEventsInfo" [value]="eventInfo.caseEventDefinition.id">{{eventInfo.caseEventDefinition.name}}</option>
            </select>
          </div>
          <div>
            <div class="dropdown-container">
              <input type="date" name="event-date" [(ngModel)]="inputSelectedDate">
            </div>
          </div>
          <div class="text-right">
              <button type="submit">Create</button>
          </div>
        </form>
      </div>
    </paper-item-body>
  </paper-icon-item>
</div>