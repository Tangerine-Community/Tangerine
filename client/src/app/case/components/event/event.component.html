<div *ngIf="loaded">
  <app-case-breadcrumb *ngIf="caseService && caseService.case && caseService.case._id" [caseId]="caseService.case._id" [caseEventId]="caseEvent.id"></app-case-breadcrumb>

  <div class="wrapper">
    <div class="form-cards" *ngIf="caseService">
      <paper-icon-item 
        *ngFor="let eventForm of eventFormsInfo"
        class="form {{eventForm.required ? 'required' : ''}}" 
        routerLink="/case/event/form/{{eventForm.caseId}}/{{eventForm.caseEventId}}/{{eventForm.id}}"
      >
        <iron-icon icon="{{eventForm.complete ? 'assignment-turned-in' : 'assignment'}}" slot="item-icon"></iron-icon> 
        <paper-item-body two-line>
          <div>
            <span [innerHTML]="eventForm.name|unsanitizeHtml"></span> ({{eventForm.id.substr(0,6)}})
          </div>
          <div secondary>{{eventForm.startDate | date:'medium'}}</div>
        </paper-item-body>
      </paper-icon-item>
      <paper-icon-item class="form new-form" *ngIf="availableEventFormDefinitions.length > 0">
        <iron-icon icon="form" slot="item-icon"></iron-icon>
        <paper-item-body two-line>
          <div>
            {{'New Form'|translate}}
          </div>
          <div secondary>
            <form (ngSubmit)="onSubmit()" #form="ngForm">
              <select name="selected-form-definition" [(ngModel)]="selectedNewEventFormDefinition">
                <option *ngFor="let availableEventFormDefinition of availableEventFormDefinitions" [value]="availableEventFormDefinition.id">{{availableEventFormDefinition.name}}</option>
              </select>
              <paper-button (click)="onSubmit()">Create</paper-button>
            </form>
          </div>
        </paper-item-body>
      </paper-icon-item>
    </div>
  </div>
</div>