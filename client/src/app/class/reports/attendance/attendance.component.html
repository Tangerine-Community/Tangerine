<!--<mat-card class="tangy-class-card-content-container">-->
<div class="selectedClassLabel">{{'Report'|translate}}<br/>{{getClassTitle(selectedClass)}}<ng-container *ngIf="!ignoreCurriculumsForTracking"> : {{curriculum?.label}} </ng-container></div>
  <div class="tangy-class-card-content-container">
    <div>
      <h2>{{'Most Recent Class'|translate}}</h2>
      
      <p>{{'Date'|translate}}: {{reportLocaltime}}</p>
      <table class="dashboard-table most-recent-class-table">
        <tr>
          <th class="student-name-column">{{'Stud.'|translate}}</th>
          <th colspan="2">{{'Attend.'|translate}}</th>
          <th colspan="2">{{'Behav.'|translate}}</th>
          <th *ngIf="!ignoreCurriculumsForTracking; else otherScoreHeader">{{'Score.'|translate}}</th>
          <ng-template #otherScoreHeader>
            <th *ngFor="let curriculum of currArray">{{curriculum.label | slice:0:3}}</th>
          </ng-template>
        </tr>
        <tr *ngFor="let student of attendanceReport?.attendanceList">
          <td class="student-name"> {{student["name"]}} {{student["surname"]}} </td>
          <td  class="progress-bar">
            <mat-progress-bar
              *ngIf="student.presentPercentage"
              value="{{ student.presentPercentage }}"
              [appProgressBarColor]="(student.presentPercentage)"
              mode="determinate">
            </mat-progress-bar>
          </td>
          <td class="number-cell centered" *ngIf="student.presentPercentage || student.presentPercentage === 0">{{student.presentPercentage}}%</td>
          <td class="number-cell centered" *ngIf="!student.presentPercentage && student.presentPercentage != 0">{{'N/A'|translate}}</td>
          <td class="progress-bar">
            <mat-progress-bar
              *ngIf="student['behavior'] && student['behavior']['internalPercentage']"
              value="{{ student['behavior']['internalPercentage'] }}"
              [appProgressBarColor]="(student['behavior']['internalPercentage'])"
              mode="determinate">
            </mat-progress-bar>
          </td>
          <td class="number-cell centered">
            <ng-container *ngIf="student['behavior'] && (student['behavior']['internalPercentage'] || student['behavior']['internalPercentage'] === 0); else naTemplate">{{student['behavior']['internalPercentage']}}%
            </ng-container>
            <ng-template #naTemplate>
              {{'N/A'|translate}}
            </ng-template>
          <td *ngIf="!ignoreCurriculumsForTracking; else otherScoreCell" class="number-cell centered">
            <ng-container *ngIf="student['score']">{{student['score']}}%</ng-container>
          </td>
          <ng-template #otherScoreCell>
            <td class="number-cell centered" *ngFor="let curriculum of currArray">
              <!--            <p *ngFor="let item of student['scores'] | keyvalue">{{item.key | slice:0:3}}: {{item.value}}</p>-->
              <ng-container *ngIf="student['scores'] && student['scores'][curriculum.labelSafe]">{{student['scores'][curriculum.labelSafe]}}%</ng-container>
            </td>
          </ng-template>
        </tr>
      </table>
      
      <p>&nbsp;</p>
      
    <div id="last-n-report">
      <h2>{{'Most recent'|translate}} {{numVisits}} {{'visits'|translate}}</h2>
      <table>
        <tr>
          <td>
            {{'Enter number of attendance reports to query: '|translate}}
          </td>
          <td>
            <form class="num-visits-form">
              <mat-form-field>
                <input [(ngModel)]="numVisits" matInput type="number"
                       (ngModelChange)="onNumberVisitsChange($event)" [ngModelOptions]="{standalone: true}">
              </mat-form-field>
            </form>
          </td>
        </tr>
      </table>
      <table id="last-n-report-table" class="dashboard-table">
        <tr>
          <th class="student-name-column">{{'Stud.'|translate}}</th>
          <th colspan="2">{{'Attend.'|translate}}</th>
          <th colspan="2">{{'Behav.'|translate}}</th>
          <th *ngIf="!ignoreCurriculumsForTracking; else otherScoreHeader">{{'Score.'|translate}}</th>
          <ng-template #otherScoreHeader>
            <th *ngFor="let curriculum of currArray">{{curriculum.label | slice:0:3}}</th>
          </ng-template>
        </tr>
        <tr *ngFor="let student of recentVisitsReport?.attendanceList">
          <td class="student-name-column">{{student.name}} {{student.student_surname}}</td>
          <td class="centered progress-bar">
            <mat-progress-bar
              *ngIf="student.presentPercentage"
              value="{{ student.presentPercentage }}"
              [appProgressBarColor]="(student.presentPercentage)"
              mode="determinate">
            </mat-progress-bar>
          </td>
          <td class="number-cell" *ngIf="student.presentPercentage">{{student.presentPercentage}}%</td>
          <td class="number-cell" *ngIf="!student.presentPercentage">{{'N/A'|translate}}</td>
          <td class="progress-bar">
            <mat-progress-bar
              *ngIf="student['behavior'] && student['behavior']['internalPercentage']"
              value="{{ student['behavior']['internalPercentage'] }}"
              [appProgressBarColor]="(student['behavior']['internalPercentage'])"
              mode="determinate">
            </mat-progress-bar>
          </td>
          <td class="number-cell centered">
            <ng-container *ngIf="student['behavior'] && (student['behavior']['internalPercentage'] || student['behavior']['internalPercentage'] === 0); else naTemplate">{{student['behavior']['internalPercentage']}}%
            </ng-container>
            <ng-template #naTemplate>
              {{'N/A'|translate}}
            </ng-template>
          <td *ngIf="!ignoreCurriculumsForTracking; else otherScoreCell" class="number-cell centered">
            <ng-container *ngIf="student['score']">{{student['score']}}%</ng-container>
          </td>
          <ng-template #otherScoreCell>
            <td class="number-cell centered" *ngFor="let curriculum of currArray">
              <!--            <p *ngFor="let item of student['scores'] | keyvalue">{{item.key | slice:0:3}}: {{item.value}}</p>-->
              <ng-container *ngIf="student['scores'] && student['scores'][curriculum.labelSafe]">{{student['scores'][curriculum.labelSafe]}}%</ng-container>
            </td>
          </ng-template>
        </tr>
      </table>
    </div>
  </div>
<!-- Must include this empty mat-chip-list element for the mat-chip to work -->
<mat-chip-list></mat-chip-list>
<!--</mat-card>-->
