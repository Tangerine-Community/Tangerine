<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1, user-scalable=yes">
    <title>Tangerine Forms</title>
    <meta name="description" content="tangy description">
    <!-- See https://goo.gl/OOhYW5 -->
    <link rel="manifest" href="/manifest.json">
    <script src="bower_components/webcomponentsjs/webcomponents-loader.js"></script>
    <script src="bower_components/pouchdb/dist/pouchdb.js"></script>
    <script src="src/cat.js"></script>
    <link href="fonts/fonts.css" rel="stylesheet">
    <link rel="import" href="src/tangy-form-app/tangy-form-app.html">
    <link rel="import" href="bower_components/paper-styles/typography.html">
    <link rel="import" href="bower_components/neon-animation/web-animations.html">
  </head>
  <body>
    <div id="base-path-loader"></div>
    <script>
    function parseQuery(qstr) {
      var query = {};
      var a = (qstr[0] === '?' ? qstr.substr(1) : qstr).split('&');
      for (var i = 0; i < a.length; i++) {
        var b = a[i].split('=');
        query[decodeURIComponent(b[0])] = decodeURIComponent(b[1] || '');
      }
      return query;
    }
    (function() {
      if (window.location.search) {
        let query = parseQuery(window.location.search)
        let formPath = query.form 
        let formDirectory = formPath.substring(0, formPath.lastIndexOf('\/')) + '/'
        console.log(`Setting <base> path using form directory: ${formDirectory}`)
        window['base-path-loader'].innerHTML = `<base href="${formDirectory}">`
      }
    })();
    </script>


     

    </script>
    <tangy-form-app></tangy-form-app>
    <style>
      html, body, tangy-form-app, tangy-form {
        min-height: 100vh;
      }
    </style>
  </body>
</html>
